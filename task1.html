<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»»åŠ¡å››ï¼šå¤šè®¾å¤‡æ•…éšœæ—¶ä¹˜å®¢çªå‘ç–¾ç—…åº”æ€¥å¤„ç½® - åŸå¸‚è½¨é“äº¤é€šåº”æ€¥å¤„ç½®ç»¼åˆè¯„ä»·ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.2em;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .back-btn {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            font-size: 1em;
            text-decoration: none;
            display: inline-block;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .scoring-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .scoring-title {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 25px;
            text-align: center;
            padding: 15px;
            background: linear-gradient(45deg, #e17055, #d63031);
            color: white;
            border-radius: 10px;
        }

        .scoring-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .scoring-table th {
            background: linear-gradient(45deg, #2d3436, #636e72);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1em;
        }

        .scoring-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        .scoring-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .scoring-table tr:hover {
            background-color: #ffe8e8;
            transform: scale(1.01);
            transition: all 0.3s ease;
        }

        .score-input {
            width: 80px;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
            text-align: center;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .score-input:focus {
            border-color: #e17055;
            box-shadow: 0 0 10px rgba(225, 112, 85, 0.3);
            outline: none;
        }

        .group-1 { background-color: #ffebee !important; }
        .group-2 { background-color: #e8f5e8 !important; }
        .group-3 { background-color: #e3f2fd !important; }
        .group-4 { background-color: #fff3e0 !important; }

        .calculate-btn {
            background: linear-gradient(45deg, #e17055, #d63031);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .result-display {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(45deg, #e17055, #d63031);
            color: white;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            display: none;
        }

        .individual-section {
            margin-top: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .individual-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .individual-title {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            padding: 12px;
            border-radius: 10px;
        }

        .wang-title {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
        }

        .dong-title {
            background: linear-gradient(45deg, #00b894, #00cec9);
            color: white;
        }

        .individual-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .individual-table th {
            background: linear-gradient(45deg, #636e72, #2d3436);
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: bold;
        }

        .individual-table td {
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        .individual-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .function-buttons {
            text-align: center;
            margin-top: 30px;
        }

        .function-buttons button {
            background: linear-gradient(45deg, #fd79a8, #e84393);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            font-size: 1em;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .function-buttons button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .individual-section {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .scoring-table, .individual-table {
                font-size: 0.9em;
            }
            
            .score-input {
                width: 60px;
                padding: 6px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="module4.html" class="back-btn">â† è¿”å›æ¨¡å—å››</a>
        
        <div class="header">
            <h1>ğŸ¥ ä»»åŠ¡å››ï¼šå¤šè®¾å¤‡æ•…éšœæ—¶ä¹˜å®¢çªå‘ç–¾ç—…åº”æ€¥å¤„ç½®</h1>
            <p>è¯„ä¼°è®¾å¤‡æ•…éšœä¸ä¹˜å®¢çªå‘ç–¾ç—…å¤åˆæƒ…å†µä¸‹çš„åº”æ€¥å“åº”èƒ½åŠ›å’Œå¤„ç½®æ°´å¹³</p>
        </div>

        <div class="scoring-section">
            <div class="scoring-title">ğŸ¥ å°ç»„è¯„åˆ†è¡¨</div>
            <table class="scoring-table">
                <thead>
                    <tr>
                        <th>è¯„ä»·é¡¹ç›®</th>
                        <th>ç¬¬ä¸€å°ç»„</th>
                        <th>ç¬¬äºŒå°ç»„</th>
                        <th>ç¬¬ä¸‰å°ç»„</th>
                        <th>ç¬¬å››å°ç»„</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>åœºæ™¯ä¸€ï¼šç…§æ˜æ•…éšœ+ä¹˜å®¢ä½è¡€ç³–</strong></td>
                        <td class="group-1"><input type="number" class="score-input group-score" min="0" max="100" placeholder="åˆ†æ•°"></td>
                        <td class="group-2"><input type="number" class="score-input group-score" min="0" max="100" placeholder="åˆ†æ•°"></td>
                        <td class="group-3"><input type="number" class="score-input group-score" min="0" max="100" placeholder="åˆ†æ•°"></td>
                        <td class="group-4"><input type="number" class="score-input group-score" min="0" max="100" placeholder="åˆ†æ•°"></td>
                    </tr>
                    <tr>
                        <td><strong>åœºæ™¯äºŒï¼šç©ºè°ƒåœè¿+ç´§æ€¥åˆ¶åŠ¨+å¿ƒæéª¤åœ</strong></td>
                        <td class="group-1"><input type="number" class="score-input group-score" min="0" max="100" placeholder="åˆ†æ•°"></td>
                        <td class="group-2"><input type="number" class="score-input group-score" min="0" max="100" placeholder="åˆ†æ•°"></td>
                        <td class="group-3"><input type="number" class="score-input group-score" min="0" max="100" placeholder="åˆ†æ•°"></td>
                        <td class="group-4"><input type="number" class="score-input group-score" min="0" max="100" placeholder="åˆ†æ•°"></td>
                    </tr>
                </tbody>
            </table>
            
            <button class="calculate-btn" onclick="calculateGroupScore()">è®¡ç®—å°ç»„æ€»åˆ†</button>
            <div id="groupResult" class="result-display"></div>

                    <div class="button-container">
                        <button onclick="generateScores()" class="action-button">ç”Ÿæˆéšæœºåˆ†æ•°</button>
                        <button onclick="exportData()" class="action-button">å¯¼å‡ºè¯„åˆ†æ•°æ®</button>
                        <button onclick="printReport()" class="action-button">æ‰“å°è¯„åˆ†æŠ¥å‘Š</button>
                        <button onclick="resetData()" class="action-button reset-button">é‡ç½®æ‰€æœ‰æ•°æ®</button>
                    </div>
                </div>         <!-- æŸ±çŠ¶å›¾å®¹å™¨ -->
            <div id="chartContainer" style="display: none; margin-top: 30px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);">
                <h3 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">ğŸ“Š å„ä»»åŠ¡è¯„åˆ†å¯¹æ¯”å›¾</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; justify-items: center;">
                    <div style="text-align: center;">
                        <h4 style="color: #e74c3c; margin-bottom: 10px;">ä»»åŠ¡ä¸€å¤–ç‰©ä¾µé™ä¸‹åˆ—è½¦æ•…éšœæ•‘æ´åº”æ€¥å¤„ç½®</h4>
                        <canvas id="chart1" width="500" height="600"></canvas>
                    </div>
                    <div style="text-align: center;">
                        <h4 style="color: #3498db; margin-bottom: 10px;">ä»»åŠ¡äºŒåˆ—è½¦åŒºé—´ç«ç¾ä¸‹ç«™çº¿è”åŠ¨åº”æ€¥å¤„ç½®</h4>
                        <canvas id="chart2" width="500" height="600"></canvas>
                    </div>
                    <div style="text-align: center;">
                        <h4 style="color: #2ecc71; margin-bottom: 10px;">ä»»åŠ¡ä¸‰å¤šä¿¡å·è®¾å¤‡æ•…éšœç»¼åˆåº”æ€¥å¤„ç½®</h4>
                        <canvas id="chart3" width="500" height="600"></canvas>
                    </div>
                    <div style="text-align: center;">
                        <h4 style="color: #f39c12; margin-bottom: 10px;">ä»»åŠ¡å››å¤šè®¾å¤‡æ•…éšœæ—¶ä¹˜å®¢çªå‘ç–¾ç—…åº”æ€¥å¤„ç½®</h4>
                        <canvas id="chart4" width="500" height="600"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¯¦ç»†æˆç»©è¡¨å±•ç¤ºåŒºåŸŸ -->
        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); margin-bottom: 30px;">
            <h3 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">ğŸ“Š å…¨ä½“å­¦å‘˜è¯¦ç»†æˆç»©è¡¨</h3>
            <p style="text-align: center; color: #7f8c8d; margin-bottom: 20px;">ç‚¹å‡»å­¦å‘˜å§“åæŸ¥çœ‹ä¸ªäººé›·è¾¾å›¾åˆ†æ | <a href="all-students-radar.html" style="color: #e74c3c; text-decoration: none; font-weight: bold;" onmouseover="this.style.color='#3498db'" onmouseout="this.style.color='#e74c3c'">ğŸ¯ æŸ¥çœ‹å…¨ä½“å­¦å‘˜é›·è¾¾å›¾</a></p>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                <table id="allStudentsTable" style="width: 100%; border-collapse: collapse; background: white;">
                    <thead>
                        <tr style="background: #34495e; color: white;">
                            <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">å§“å</th>
                            <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">ä»»åŠ¡ä¸€å¤–ç‰©ä¾µé™ä¸‹åˆ—è½¦æ•…éšœæ•‘æ´åº”æ€¥å¤„ç½®</th>
                <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">ä»»åŠ¡äºŒåˆ—è½¦åŒºé—´ç«ç¾ä¸‹ç«™çº¿è”åŠ¨åº”æ€¥å¤„ç½®</th>
                <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">ä»»åŠ¡ä¸‰å¤šä¿¡å·è®¾å¤‡æ•…éšœç»¼åˆåº”æ€¥å¤„ç½®</th>
                <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">ä»»åŠ¡å››å¤šè®¾å¤‡æ•…éšœæ—¶ä¹˜å®¢çªå‘ç–¾ç—…åº”æ€¥å¤„ç½®</th>
                            <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">ç»¼åˆåˆ†</th>
                        </tr>
                    </thead>
                    <tbody id="allStudentsTableBody">
                        <!-- é¢„è®¾å­¦ç”Ÿæ•°æ® -->
                    </tbody>
                </table>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="calculate-btn" onclick="generateAllStudentsCharts()">ç”Ÿæˆå…¨ä½“å­¦å‘˜æŠ˜çº¿å›¾</button>
            </div>
        </div>

        <!-- ä¸ªäººè¯„åˆ†æ•°æ®è¾“å…¥åŒºåŸŸ -->
        <div class="individual-section">
            <div class="individual-card">
                <div class="individual-title wang-title">ğŸ‘¨â€ğŸ’¼ ä¸ªäººè¯„åˆ†æ•°æ®è¾“å…¥</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4>é™†ä¿Šç¾½è¯„åˆ†</h4>
                        <table class="individual-table">
                            <thead>
                                <tr>
                                    <th>ä»»åŠ¡</th>
                                    <th>å¾—åˆ†</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>åœºæ™¯ä¸€ï¼šç…§æ˜æ•…éšœ+ä¹˜å®¢ä½è¡€ç³–</strong></td>
                                    <td><input type="number" class="score-input wang-score" data-task="1" min="0" max="100" placeholder="åˆ†æ•°"></td>
                                </tr>
                                <tr>
                                    <td><strong>åœºæ™¯äºŒï¼šç©ºè°ƒåœè¿+ç´§æ€¥åˆ¶åŠ¨+å¿ƒæéª¤åœ</strong></td>
                                    <td><input type="number" class="score-input wang-score" data-task="2" min="0" max="100" placeholder="åˆ†æ•°"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <h4>è‘£å£®è¯„åˆ†</h4>
                        <table class="individual-table">
                            <thead>
                                <tr>
                                    <th>ä»»åŠ¡</th>
                                    <th>å¾—åˆ†</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>åœºæ™¯ä¸€ï¼šç…§æ˜æ•…éšœ+ä¹˜å®¢ä½è¡€ç³–</strong></td>
                                    <td><input type="number" class="score-input dong-score" data-task="1" min="0" max="100" placeholder="åˆ†æ•°"></td>
                                </tr>
                                <tr>
                                    <td><strong>åœºæ™¯äºŒï¼šç©ºè°ƒåœè¿+ç´§æ€¥åˆ¶åŠ¨+å¿ƒæéª¤åœ</strong></td>
                                    <td><input type="number" class="score-input dong-score" data-task="2" min="0" max="100" placeholder="åˆ†æ•°"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="calculate-btn" onclick="generateIndividualCharts()">ç”Ÿæˆä¸ªäººè¯„åˆ†å›¾è¡¨</button>
                </div>
            </div>
        </div>

        <!-- ä¸ªäººè¯„åˆ†å›¾è¡¨å±•ç¤ºåŒºåŸŸ -->
        <div id="individualChartsContainer" style="display: none; margin-top: 30px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);">
            <h3 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">ğŸ“ˆ ä¸ªäººè¯„åˆ†å›¾è¡¨åˆ†æ</h3>
            
            <!-- çº¿å›¾åŒºåŸŸ -->
            <div style="display: grid; grid-template-columns: 1fr; gap: 30px; margin-bottom: 30px; justify-items: center;">
                <div style="text-align: center;">
                    <h4 style="color: #e74c3c; margin-bottom: 15px; font-size: 1.3em;">ä»»åŠ¡å››</h4>
                    <canvas id="taskChart1" width="1000" height="800"></canvas>
                </div>
                <div style="text-align: center;">
                    <h4 style="color: #3498db; margin-bottom: 15px; font-size: 1.3em;">ä»»åŠ¡äºŒ</h4>
                    <canvas id="taskChart2" width="1000" height="800"></canvas>
                </div>
                <div style="text-align: center;">
                    <h4 style="color: #2ecc71; margin-bottom: 15px; font-size: 1.3em;">ä»»åŠ¡ä¸‰</h4>
                    <canvas id="taskChart3" width="1000" height="800"></canvas>
                </div>
                <div style="text-align: center;">
                    <h4 style="color: #f39c12; margin-bottom: 15px; font-size: 1.3em;">ä»»åŠ¡å››</h4>
                    <canvas id="taskChart4" width="1000" height="800"></canvas>
                </div>
                <div style="text-align: center;">
                    <h4 style="color: #9b59b6; margin-bottom: 15px; font-size: 1.3em;">ç»¼åˆåˆ†</h4>
                    <canvas id="taskChart5" width="1000" height="800"></canvas>
                </div>
            </div>
            
            <!-- æˆç»©è¡¨æ ¼ -->
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                <h4 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">ğŸ“Š è¯¦ç»†æˆç»©è¡¨</h4>
                <table id="scoresTable" style="width: 100%; border-collapse: collapse; background: white;">
                    <thead>
                        <tr style="background: #34495e; color: white;">
                            <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">å§“å</th>
                            <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">åœºæ™¯ä¸€ï¼šç…§æ˜æ•…éšœ+ä¹˜å®¢ä½è¡€ç³–</th>
                <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">åœºæ™¯äºŒï¼šç©ºè°ƒåœè¿+ç´§æ€¥åˆ¶åŠ¨+å¿ƒæéª¤åœ</th>
                            <th style="border: 1px solid #ddd; padding: 12px; text-align: center;">ç»¼åˆåˆ†</th>
                        </tr>
                    </thead>
                    <tbody id="scoresTableBody">
                        <!-- åŠ¨æ€ç”Ÿæˆå†…å®¹ -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="function-buttons">
            <button onclick="generateScores()">ğŸ² ç”Ÿæˆéšæœºåˆ†æ•°</button>
            <button onclick="exportData()">ğŸ“Š å¯¼å‡ºè¯„åˆ†æ•°æ®</button>
            <button onclick="printReport()">ğŸ–¨ï¸ æ‰“å°è¯„åˆ†æŠ¥å‘Š</button>
            <button onclick="resetData()">ğŸ”„ é‡ç½®æ‰€æœ‰æ•°æ®</button>
        </div>
    </div>

    <script>
        function generateScores() {
            const scoreInputs = document.querySelectorAll('.score-input');
            scoreInputs.forEach(input => {
                // ç”Ÿæˆ60åˆ°100ä¹‹é—´çš„éšæœºæ•´æ•°
                input.value = Math.floor(Math.random() * 41) + 60;
            });
            // ç”Ÿæˆåˆ†æ•°åè‡ªåŠ¨è®¡ç®—å¹¶æ›´æ–°å›¾è¡¨
            calculateGroupScore();
            generateIndividualCharts();
        }

        function calculateGroupScore() {
            const groupInputs = document.querySelectorAll('.group-score');
            const groupTotals = [0, 0, 0, 0];
            
            // è®¡ç®—æ¯ç»„æ€»åˆ†
            groupInputs.forEach((input, index) => {
                const groupIndex = index % 4;
                const score = parseFloat(input.value) || 0;
                groupTotals[groupIndex] += score;
            });
            
            // ç”Ÿæˆç»“æœHTML
            let resultHTML = '<h3>ğŸ† å°ç»„è¯„åˆ†ç»“æœ</h3><div class="score-summary">';
            const groupNames = ['ç¬¬ä¸€å°ç»„', 'ç¬¬äºŒå°ç»„', 'ç¬¬ä¸‰å°ç»„', 'ç¬¬å››å°ç»„'];
            const groupClasses = ['group-1', 'group-2', 'group-3', 'group-4'];
            
            groupTotals.forEach((total, index) => {
                resultHTML += `<div class="score-item ${groupClasses[index]}">${groupNames[index]}ï¼š${total}åˆ†</div>`;
            });
            
            const averageScore = (groupTotals.reduce((a, b) => a + b, 0) / 4).toFixed(1);
            resultHTML += `</div><div class="average-score">å¹³å‡åˆ†ï¼š${averageScore}åˆ†</div>`;
            
            document.getElementById('groupResult').innerHTML = resultHTML;
            document.getElementById('groupResult').style.display = 'block';
            
            // æ˜¾ç¤ºæŸ±çŠ¶å›¾
            drawChart(groupTotals);
        }
        
        function drawChart(scores) {
            const chartContainer = document.getElementById('chartContainer');
            
            // æ˜¾ç¤ºå›¾è¡¨å®¹å™¨
            chartContainer.style.display = 'block';
            
            // è·å–æ¯ä¸ªä»»åŠ¡çš„åˆ†æ•°ï¼ˆæ¯è¡Œ3ä¸ªåˆ†æ•°å¯¹åº”3ä¸ªä»»åŠ¡ï¼‰
            const groupInputs = document.querySelectorAll('.group-score');
            const scenarioScores = [[], [], []]; // ä¸‰ä¸ªä»»åŠ¡çš„åˆ†æ•°
            
            groupInputs.forEach((input, index) => {
                const scenarioIndex = Math.floor(index / 4); // æ¯4ä¸ªè¾“å…¥æ¡†ä¸ºä¸€ä¸ªä»»åŠ¡
                const groupIndex = index % 4; // ç¬¬å‡ ä¸ªå°ç»„
                const score = parseFloat(input.value) || 0;
                if (!scenarioScores[scenarioIndex]) scenarioScores[scenarioIndex] = [];
                scenarioScores[scenarioIndex][groupIndex] = score;
            });
            
            // ç»˜åˆ¶å››ä¸ªæŸ±çŠ¶å›¾
            const chartIds = ['chart1', 'chart2', 'chart3', 'chart4'];
            const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12'];
            const scenarioNames = [
                'åœºæ™¯ä¸€ï¼šç…§æ˜æ•…éšœ+ä¹˜å®¢ä½è¡€ç³–',
                'åœºæ™¯äºŒï¼šç©ºè°ƒåœè¿+ç´§æ€¥åˆ¶åŠ¨+å¿ƒæéª¤åœ'
            ];
            
            chartIds.forEach((chartId, chartIndex) => {
                const canvas = document.getElementById(chartId);
                const ctx = canvas.getContext('2d');
                
                // æ¸…ç©ºç”»å¸ƒ
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const scores = scenarioScores[chartIndex] || [0, 0, 0, 0];
                const maxScore = Math.max(...scores, 100);
                
                // å›¾è¡¨é…ç½®
                const padding = 125;
                const chartWidth = canvas.width - 2 * padding;
                const chartHeight = canvas.height - 2 * padding - 60; // ä¸ºç»„åç•™å‡ºæ›´å¤šç©ºé—´
                const barWidth = chartWidth / 6;
                
                // ç»˜åˆ¶åæ ‡è½´
                ctx.strokeStyle = '#34495e';
                ctx.lineWidth = 6;
                ctx.beginPath();
                ctx.moveTo(padding, padding);
                ctx.lineTo(padding, padding + chartHeight);
                ctx.lineTo(padding + chartWidth, padding + chartHeight);
                ctx.stroke();
                
                // ç»˜åˆ¶Yè½´åˆ»åº¦
                ctx.fillStyle = '#34495e';
                ctx.font = '30px Arial';
                ctx.textAlign = 'right';
                for (let i = 0; i <= 5; i++) {
                    const y = padding + chartHeight - (i * chartHeight / 5);
                    const value = (maxScore * i / 5).toFixed(0);
                    ctx.fillText(value, padding - 20, y + 10);
                    
                    if (i > 0) {
                        ctx.strokeStyle = '#ecf0f1';
                        ctx.lineWidth = 4;
                        ctx.beginPath();
                        ctx.moveTo(padding, y);
                        ctx.lineTo(padding + chartWidth, y);
                        ctx.stroke();
                    }
                }
                
                // ç»˜åˆ¶æŸ±çŠ¶å›¾
                const groupColors = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12'];
                const groupNames = ['ç»„1', 'ç»„2', 'ç»„3', 'ç»„4'];
                
                scores.forEach((score, index) => {
                    const x = padding + (index + 0.5) * (chartWidth / 4) - barWidth / 2;
                    const barHeight = (score / maxScore) * chartHeight;
                    const y = padding + chartHeight - barHeight;
                    
                    // ç»˜åˆ¶æŸ±å­
                    ctx.fillStyle = groupColors[index];
                    ctx.fillRect(x, y, barWidth, barHeight);
                    
                    // ç»˜åˆ¶æŸ±å­è¾¹æ¡†
                    ctx.strokeStyle = '#2c3e50';
                    ctx.lineWidth = 4;
                    ctx.strokeRect(x, y, barWidth, barHeight);
                    
                    // ç»˜åˆ¶åˆ†æ•°æ ‡ç­¾
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = 'bold 38px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(score.toString(), x + barWidth / 2, y - 20);
                    
                    // ç»˜åˆ¶ç»„å
                    ctx.font = '32px Arial';
                    ctx.fillText(groupNames[index], x + barWidth / 2, padding + chartHeight + 55);
                });
            });
        }

        function generateIndividualCharts() {
            // æ”¶é›†æ•°æ®
            const luScores = [];
            const dongScores = [];
            
            // è·å–é™†ä¿Šç¾½çš„åˆ†æ•°
            document.querySelectorAll('.wang-score').forEach(input => {
                luScores.push(parseFloat(input.value) || 0);
            });
            
            // è·å–è‘£å£®çš„åˆ†æ•°
            document.querySelectorAll('.dong-score').forEach(input => {
                dongScores.push(parseFloat(input.value) || 0);
            });
            
            // è®¡ç®—ç»¼åˆåˆ†
            const luTotal = luScores.reduce((a, b) => a + b, 0);
            const dongTotal = dongScores.reduce((a, b) => a + b, 0);
            
            // æ˜¾ç¤ºå›¾è¡¨å®¹å™¨
            document.getElementById('individualChartsContainer').style.display = 'block';
            
            // ç»˜åˆ¶äº”ä¸ªå›¾è¡¨
            for (let i = 1; i <= 5; i++) {
                drawTaskChart(i, luScores, dongScores, luTotal, dongTotal);
            }
            
            // ç”Ÿæˆæˆç»©è¡¨æ ¼
            generateScoresTable(luScores, dongScores, luTotal, dongTotal);
        }
        
        function drawTaskChart(taskIndex, wangScores, dongScores, wangTotal, dongTotal) {
            const canvas = document.getElementById(`taskChart${taskIndex}`);
            const ctx = canvas.getContext('2d');
            
            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // å›¾è¡¨é…ç½®
            const padding = 125;
            const bottomPadding = 160; // ä¸ºä¸ªäººè¯„åˆ†å›¾è¡¨ç•™å‡ºåº•éƒ¨ç©ºé—´
            const chartWidth = canvas.width - 2 * padding;
            const chartHeight = canvas.height - padding - bottomPadding;
            
            // è·å–å½“å‰ä»»åŠ¡çš„æ•°æ®
            let data;
            if (taskIndex <= 4) {
                data = [wangScores[taskIndex - 1], dongScores[taskIndex - 1]];
            } else {
                data = [wangTotal, dongTotal];
            }
            
            const maxScore = Math.max(...data, 100);
            const names = ['é™†ä¿Šç¾½', 'è‘£å£®'];
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#34495e';
            ctx.lineWidth = 6;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, padding + chartHeight);
            ctx.lineTo(padding + chartWidth, padding + chartHeight);
            ctx.stroke();
            
            // ç»˜åˆ¶Yè½´åˆ»åº¦
            ctx.fillStyle = '#34495e';
            ctx.font = '30px Arial';
            ctx.textAlign = 'right';
            for (let i = 0; i <= 5; i++) {
                const y = padding + chartHeight - (i * chartHeight / 5);
                const value = (maxScore * i / 5).toFixed(0);
                ctx.fillText(value, padding - 20, y + 10);
                
                if (i > 0) {
                    ctx.strokeStyle = '#ecf0f1';
                    ctx.lineWidth = 4;
                    ctx.beginPath();
                    ctx.moveTo(padding, y);
                    ctx.lineTo(padding + chartWidth, y);
                    ctx.stroke();
                }
            }
            
            // ç»˜åˆ¶çº¿å›¾
            const pointRadius = 20;
            const lineColors = ['#3498db', '#e74c3c'];
            
            // ç»˜åˆ¶è¿æ¥çº¿
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 10;
            ctx.beginPath();
            
            data.forEach((score, index) => {
                const x = padding + (index + 1) * (chartWidth / 3);
                const y = padding + chartHeight - (score / maxScore) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            ctx.stroke();
            
            // ç»˜åˆ¶æ•°æ®ç‚¹å’Œæ ‡ç­¾
            data.forEach((score, index) => {
                const x = padding + (index + 1) * (chartWidth / 3);
                const y = padding + chartHeight - (score / maxScore) * chartHeight;
                
                // ç»˜åˆ¶æ•°æ®ç‚¹
                ctx.fillStyle = lineColors[index];
                ctx.beginPath();
                ctx.arc(x, y, pointRadius, 0, 2 * Math.PI);
                ctx.fill();
                
                // ç»˜åˆ¶æ•°æ®ç‚¹è¾¹æ¡†
                ctx.strokeStyle = '#2c3e50';
                ctx.lineWidth = 6;
                ctx.stroke();
                
                // ç»˜åˆ¶åˆ†æ•°æ ‡ç­¾
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 38px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(score.toString(), x, y - 45);
                
                // ç»˜åˆ¶äººå‘˜å§“å
                ctx.font = '32px Arial';
                ctx.fillText(names[index], x, padding + chartHeight + 40);
            });
        }
        
        // å…¨ä½“å­¦å‘˜æ•°æ®ï¼ˆå›ºå®šæ•°æ®ï¼‰
        const allStudentsData = [
            { name: 'è”¡è‹æº', scores: [95, 80, 95, 99], total: 369 },
            { name: 'é’±è¯—é›¯', scores: [96, 88, 97, 95], total: 376 },
            { name: 'è‘£å£®', scores: [94, 89, 96, 97], total: 376 },
            { name: 'è€¿è±ª', scores: [94, 94, 98, 98], total: 384 },
            { name: 'æ›¹æ¢¦é¢–', scores: [93, 90, 98, 97], total: 378 },
            { name: 'é™ˆå›½ä¸¹', scores: [95, 92, 97, 96], total: 380 },
            { name: 'é™ˆå¨œ', scores: [92, 89, 98, 97], total: 376 },
            { name: 'éŸ©é’Ÿè´µ', scores: [96, 89, 97, 96], total: 378 },
            { name: 'ç¨‹æ€ä½³', scores: [95, 87, 95, 98], total: 375 },
            { name: 'èƒ¡åæ—º', scores: [95, 93, 98, 97], total: 383 },
            { name: 'ç¨‹é›¨ç‘¶', scores: [94, 90, 96, 98], total: 378 },
            { name: 'ææ·', scores: [93, 92, 98, 96], total: 379 },
            { name: 'ä¸æ¢¦è¯­', scores: [92, 91, 96, 99], total: 378 },
            { name: 'ä»˜é’é’', scores: [95, 90, 96, 98], total: 379 },
            { name: 'ææ˜¾é˜³', scores: [96, 91, 98, 97], total: 382 },
            { name: 'é™†ä¿Šç¾½', scores: [94, 88, 98, 96], total: 376 },
            { name: 'æå°å‡¡', scores: [93, 87, 98, 97], total: 375 },
            { name: 'å¹´æµ©', scores: [95, 84, 96, 95], total: 370 },
            { name: 'æå“ç’‡', scores: [96, 86, 97, 98], total: 377 },
            { name: 'è’²å‘æ¸…', scores: [97, 90, 96, 97], total: 380 },
            { name: 'åˆ˜æ¬£æ‚¦', scores: [94, 85, 98, 96], total: 373 },
            { name: 'åˆ˜é˜³å', scores: [95, 82, 97, 97], total: 371 },
            { name: 'æ²ˆé•¿é’', scores: [93, 89, 99, 95], total: 376 },
            { name: 'ç‹æ ‘å®‡', scores: [93, 90, 95, 97], total: 375 },
            { name: 'å´è‰¯å†›', scores: [94, 93, 95, 98], total: 380 },
            { name: 'å•ç§‘æ…§', scores: [94, 93, 96, 96], total: 379 },
            { name: 'å¾åå‰‘', scores: [96, 92, 98, 95], total: 381 },
            { name: 'æ½˜é¦¨', scores: [96, 95, 100, 98], total: 389 }
        ];

        function generateAllStudentsTable() {
            const tableBody = document.getElementById('allStudentsTableBody');
            
            // æ¸…ç©ºè¡¨æ ¼
            tableBody.innerHTML = '';
            
            // ç”Ÿæˆè¡¨æ ¼è¡Œ
            allStudentsData.forEach(student => {
                const row = document.createElement('tr');
                
                // é«˜äº®è‘£å£®çš„è¡Œ
                if (student.name === 'è‘£å£®') {
                    row.style.backgroundColor = '#fff3cd';
                    row.style.fontWeight = 'bold';
                }
                
                row.innerHTML = `
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;"><a href="student-radar.html?student=${encodeURIComponent(student.name)}" style="color: #3498db; text-decoration: none; font-weight: bold;" onmouseover="this.style.color='#e74c3c'" onmouseout="this.style.color='#3498db'">${student.name}</a></td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${student.scores[0]}</td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${student.scores[1]}</td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${student.scores[2]}</td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${student.scores[3]}</td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold; color: #e74c3c;">${student.total}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function generateAllStudentsCharts() {
            // æ˜¾ç¤ºå›¾è¡¨å®¹å™¨
            document.getElementById('individualChartsContainer').style.display = 'block';
            
            // ç»˜åˆ¶äº”ä¸ªå›¾è¡¨ï¼ˆåŒ…å«æ‰€æœ‰å­¦ç”Ÿï¼‰
            for (let i = 1; i <= 5; i++) {
                drawAllStudentsTaskChart(i);
            }
            
            // æ›´æ–°æˆç»©è¡¨æ ¼æ ‡é¢˜
            const chartTitle = document.querySelector('#individualChartsContainer h3');
            chartTitle.textContent = 'ğŸ“ˆ å…¨ä½“å­¦å‘˜è¯„åˆ†å›¾è¡¨åˆ†æ';
        }
        
        function drawAllStudentsTaskChart(taskIndex) {
            const canvas = document.getElementById(`taskChart${taskIndex}`);
            const ctx = canvas.getContext('2d');
            
            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // å›¾è¡¨é…ç½®
            const padding = 125;
            const bottomPadding = 250; // ä¸ºå…¨ä½“å­¦å‘˜æŠ˜çº¿å›¾ç•™å‡ºæ›´å¤šåº•éƒ¨ç©ºé—´
            const chartWidth = canvas.width - 2 * padding;
            const chartHeight = canvas.height - padding - bottomPadding;
            
            // è·å–å½“å‰ä»»åŠ¡çš„æ•°æ®
            let taskData = [];
            if (taskIndex <= 4) {
                taskData = allStudentsData.map(student => ({
                    name: student.name,
                    score: student.scores[taskIndex - 1]
                }));
            } else {
                taskData = allStudentsData.map(student => ({
                    name: student.name,
                    score: student.total
                }));
            }
            
            const maxScore = Math.max(...taskData.map(d => d.score), 100);
            const minScore = Math.min(...taskData.map(d => d.score));
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#34495e';
            ctx.lineWidth = 6;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, padding + chartHeight);
            ctx.lineTo(padding + chartWidth, padding + chartHeight);
            ctx.stroke();
            
            // ç»˜åˆ¶Yè½´åˆ»åº¦
            ctx.fillStyle = '#34495e';
            ctx.font = '30px Arial';
            ctx.textAlign = 'right';
            for (let i = 0; i <= 5; i++) {
                const y = padding + chartHeight - (i * chartHeight / 5);
                const value = (minScore + (maxScore - minScore) * i / 5).toFixed(0);
                ctx.fillText(value, padding - 20, y + 10);
                
                if (i > 0) {
                    ctx.strokeStyle = '#ecf0f1';
                    ctx.lineWidth = 4;
                    ctx.beginPath();
                    ctx.moveTo(padding, y);
                    ctx.lineTo(padding + chartWidth, y);
                    ctx.stroke();
                }
            }
            
            // ç»˜åˆ¶æŠ˜çº¿å›¾
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 8;
            ctx.beginPath();
            
            taskData.forEach((data, index) => {
                const x = padding + (index / (taskData.length - 1)) * chartWidth;
                const y = padding + chartHeight - ((data.score - minScore) / (maxScore - minScore)) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            ctx.stroke();
            
            // ç»˜åˆ¶æ•°æ®ç‚¹å’Œæ ‡ç­¾
            taskData.forEach((data, index) => {
                const x = padding + (index / (taskData.length - 1)) * chartWidth;
                const y = padding + chartHeight - ((data.score - minScore) / (maxScore - minScore)) * chartHeight;
                
                // ç»˜åˆ¶æ•°æ®ç‚¹
                if (data.name === 'é™†ä¿Šç¾½' || data.name === 'è‘£å£®') {
                    // é«˜äº®é™†ä¿Šç¾½å’Œè‘£å£®çš„ç‚¹
                    ctx.fillStyle = '#e74c3c';
                    ctx.beginPath();
                    ctx.arc(x, y, 25, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // æ˜¾ç¤ºåˆ†æ•°åœ¨ç‚¹ä¸Šæ–¹
                    ctx.fillStyle = '#e74c3c';
                    ctx.font = 'bold 38px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(data.score.toString(), x, y - 45);
                } else {
                    ctx.fillStyle = '#3498db';
                    ctx.beginPath();
                    ctx.arc(x, y, 12, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // æ˜¾ç¤ºåˆ†æ•°åœ¨ç‚¹ä¸Šæ–¹
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = '30px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(data.score.toString(), x, y - 30);
                }
                
                // åœ¨Xè½´ä¸‹æ–¹æ˜¾ç¤ºæ‰€æœ‰äººçš„å§“å
                ctx.save();
                ctx.translate(x, padding + chartHeight + 50);
                ctx.rotate(-Math.PI / 3); // æ—‹è½¬60åº¦ï¼Œæ›´é™¡å³­çš„è§’åº¦é¿å…é‡å 
                ctx.fillStyle = data.name === 'é™†ä¿Šç¾½' || data.name === 'è‘£å£®' ? '#e74c3c' : '#2c3e50';
                ctx.font = data.name === 'é™†ä¿Šç¾½' || data.name === 'è‘£å£®' ? 'bold 25px Arial' : '22px Arial';
                ctx.textAlign = 'left';
                ctx.fillText(data.name, 0, 0);
                ctx.restore();
            });
        }

        function generateScoresTable(luScores, dongScores, luTotal, dongTotal) {
            const tableBody = document.getElementById('scoresTableBody');
            
            // æ›´æ–°é™†ä¿Šç¾½å’Œè‘£å£®çš„æ•°æ®
            const studentsData = allStudentsData.map(student => {
                if (student.name === 'é™†ä¿Šç¾½') {
                    return { name: student.name, scores: luScores, total: luTotal };
                } else if (student.name === 'è‘£å£®') {
                    return { name: student.name, scores: dongScores, total: dongTotal };
                }
                return student;
            });
            
            // æ¸…ç©ºè¡¨æ ¼
            tableBody.innerHTML = '';
            
            // ç”Ÿæˆè¡¨æ ¼è¡Œ
            studentsData.forEach(student => {
                const row = document.createElement('tr');
                
                // é«˜äº®è‘£å£®çš„è¡Œ
                if (student.name === 'è‘£å£®') {
                    row.style.backgroundColor = '#fff3cd';
                    row.style.fontWeight = 'bold';
                }
                
                row.innerHTML = `
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${student.name}</td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${student.scores[0]}</td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${student.scores[1]}</td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${student.scores[2]}</td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${student.scores[3]}</td>
                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold; color: #e74c3c;">${student.total}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        function calculateWangScore() {
            // ä¿ç•™åŸæœ‰åŠŸèƒ½ä»¥å…¼å®¹æ€§
            generateIndividualCharts();
        }
        
        function calculateDongScore() {
            // ä¿ç•™åŸæœ‰åŠŸèƒ½ä»¥å…¼å®¹æ€§
            generateIndividualCharts();
        }

        function exportData() {
            const data = {
                task: 'ä»»åŠ¡å››ï¼šå¤šè®¾å¤‡æ•…éšœæ—¶ä¹˜å®¢çªå‘ç–¾ç—…åº”æ€¥å¤„ç½®',
                timestamp: new Date().toLocaleString(),
                groupScores: [],
                individualScores: {
                    wang: [],
                    dong: []
                }
            };
            
            // æ”¶é›†å°ç»„è¯„åˆ†æ•°æ®
            const groupRows = document.querySelectorAll('.scoring-table tbody tr');
            groupRows.forEach(row => {
                const rowData = {
                    item: row.cells[0].textContent,
                    scores: []
                };
                
                for (let i = 1; i <= 4; i++) {
                    const input = row.cells[i].querySelector('.group-score');
                    rowData.scores.push(input.value || 0);
                }
                
                data.groupScores.push(rowData);
            });
            
            // æ”¶é›†é™†ä¿Šç¾½ä¸ªäººè¯„åˆ†æ•°æ®
            const wangRows = document.querySelectorAll('.individual-card:first-child .individual-table tbody tr');
            wangRows.forEach(row => {
                data.individualScores.wang.push({
                    item: row.cells[0].textContent,
                    score: row.cells[1].querySelector('.wang-score').value || 0
                });
            });
            
            // æ”¶é›†è‘£å£®ä¸ªäººè¯„åˆ†æ•°æ®
            const dongRows = document.querySelectorAll('.individual-card:last-child .individual-table tbody tr');
            dongRows.forEach(row => {
                data.individualScores.dong.push({
                    item: row.cells[0].textContent,
                    score: row.cells[1].querySelector('.dong-score').value || 0
                });
            });
            
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ä»»åŠ¡å››è¯„åˆ†æ•°æ®_' + new Date().toISOString().slice(0, 10) + '.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function printReport() {
            window.print();
        }

        function generateScores() {
            const inputs = document.querySelectorAll('.score-input');
            inputs.forEach(input => {
                // ç”Ÿæˆ60åˆ°100ä¹‹é—´çš„éšæœºæ•´æ•°
                input.value = Math.floor(Math.random() * 41) + 60;
                // æ‰‹åŠ¨è§¦å‘inputäº‹ä»¶ä»¥ç¡®ä¿æ•°æ®è¢«ä¿å­˜å’Œæ˜¾ç¤º
                input.dispatchEvent(new Event('input'));
            });
            // é‡æ–°è®¡ç®—æ‰€æœ‰åˆ†æ•°
            calculateGroupScore();
            generateIndividualCharts();
        }

        function resetData() {
            if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰è¯„åˆ†æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                document.querySelectorAll('.score-input').forEach(input => {
                    input.value = '';
                });
                document.querySelectorAll('.result-display').forEach(result => {
                    result.style.display = 'none';
                });
                
                // æ¸…é™¤localStorageä¸­çš„åˆ†æ•°æ•°æ®
                localStorage.removeItem('task1_scores');
                alert('æ‰€æœ‰åˆ†æ•°å·²é‡ç½®ï¼');
                // é‡æ–°ç”Ÿæˆåˆ†æ•°
                generateScores();
            }
        }

        // ä¿å­˜åˆ†æ•°åˆ°localStorage
        function saveScores() {
            const scores = {};
            document.querySelectorAll('.score-input').forEach((input, index) => {
                if (input.value) {
                    scores[index] = input.value;
                }
            });
            localStorage.setItem('task1_scores', JSON.stringify(scores));
        }

        // ä»localStorageæ¢å¤åˆ†æ•°
        function loadScores() {
            const savedScores = localStorage.getItem('task1_scores');
            if (savedScores) {
                try {
                    const scores = JSON.parse(savedScores);
                    const inputs = document.querySelectorAll('.score-input');
                    Object.keys(scores).forEach(index => {
                        if (inputs[index]) {
                            inputs[index].value = scores[index];
                            // æ‰‹åŠ¨è§¦å‘inputäº‹ä»¶ä»¥ç¡®ä¿æ•°æ®è¢«ä¿å­˜
                            inputs[index].dispatchEvent(new Event('input'));
                        }
                    });
                } catch (e) {
                    console.error("Error parsing or loading scores:", e);
                    localStorage.removeItem('task1_scores');
                }
            }
        }

        // è¾“å…¥éªŒè¯å’Œè‡ªåŠ¨ä¿å­˜
        document.addEventListener('input', function(e) {
            if (e.target.classList.contains('score-input')) {
                const value = parseFloat(e.target.value);
                const max = parseFloat(e.target.getAttribute('max')) || 100;
                const min = parseFloat(e.target.getAttribute('min')) || 0;
                
                if (value > max) e.target.value = max;
                if (value < min) e.target.value = min;
                
                // è‡ªåŠ¨ä¿å­˜åˆ†æ•°
                saveScores();
            }
        });

        // é¡µé¢åŠ è½½åŠ¨ç”»
        document.addEventListener('DOMContentLoaded', function() {
            const sections = document.querySelectorAll('.scoring-section, .individual-card');
            sections.forEach((section, index) => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    section.style.transition = 'all 0.5s ease';
                    section.style.opacity = '1';
                    section.style.transform = 'translateY(0)';
                }, index * 200);
            });
            
            // è‡ªåŠ¨ç”Ÿæˆå…¨ä½“å­¦å‘˜æˆç»©è¡¨
            generateAllStudentsTable();
            
            // æ¢å¤ä¿å­˜çš„åˆ†æ•°
            loadScores();
            calculateGroupScore();
            generateIndividualCharts();
            
            // å¦‚æœæ²¡æœ‰ä¿å­˜çš„åˆ†æ•°ï¼Œåˆ™ç”Ÿæˆåˆå§‹åˆ†æ•°
            let scoresExist = false;
            const savedScores = localStorage.getItem('task1_scores');
            if (savedScores) {
                try {
                    if (Object.keys(JSON.parse(savedScores)).length > 0) {
                        scoresExist = true;
                    }
                } catch (e) {
                    console.error("Error parsing saved scores from localStorage:", e);
                    localStorage.removeItem('task1_scores'); // æ¸…é™¤æŸåçš„æ•°æ®
                }
            }

            if (!scoresExist) {
                generateScores();
            }
        });

        // é¡µé¢å¸è½½å‰ä¿å­˜åˆ†æ•°
        window.addEventListener('beforeunload', function() {
            saveScores();
        });
    </script>
</body>
</html>